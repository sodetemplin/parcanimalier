<?php 

function liste_photos($dirtolist) {
	global $type_images_autorisees;
	// open this directory 
	$myDirectory = opendir($dirtolist);
	
	// get each entry
	while($entryName = readdir($myDirectory)) {
	    if (substr("$entryName", 0, 1) != ".") { // don't list hidden files or else than authorized images type		
			foreach($type_images_autorisees as $type) {
				if (substr("$entryName", -3, 3) == $type) 
  					$dirArray[] = $dirtolist."/".$entryName;
			}
		}
	}
	
	//sort by name
	sort($dirArray, SORT_STRING);
	
	// close directory
	closedir($myDirectory);
	
	return $dirArray;
}

function affiche_photos($animal,$tab_photos,$tab_vignettes) {
	global $sous_chemin_vignettes;
	echo $animal;
	$nb_photos = count($tab_photos);
	$link = "";
	//si la photo ET la vignette existent, on montre le lien
	for($index=0; $index < $nb_photos; $index++) { 
		if(file_exists($tab_photos[$index]) && file_exists($tab_vignettes[$index])) 
			$link .= "<a href=\"".$tab_photos[$index]."\" title=\"".$animal."\"><img alt=\"".$animal."\" src=\"".$tab_vignettes[$index]."\"/></a>"; 
	} 
	return $link;
}

?>